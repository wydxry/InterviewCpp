## 网线
实际上两台设备只需要使用网线连接之后就可以完成通信，这个过程无需任何地址参与。整个通信是通过七层模型定义中的物理层完成的，物理层的功能就是利用传输介质为数据链路层提供物理连接，实现比特流的透明传输。当数据包从网卡出发之后，并不会关心自己去往何方，它们只会顺着网线的方向向前移动，直到到达下一个设备为止。

### 网线的作用
将数据包从一端传输到另一端。

## 集线器
为了节省硬件资源，网络一般都采用了中心型的结构。这种结构的特点就是将网络设备放置在中心，然后将所有的终端设备连接到中心。集线器（HUB）就是这样的一个网络设备，它和网卡、网线等传输介质一样，也工作在“物理层”。

### 集线器的工作方式
HUB本身并不会识别IP地址和MAC地址，它只会将从一个接口所收到的数据包从其他的接口转发出去。

在进行数据包的捕获时，使用HUB是相当便利的。但是如果使用HUB作为组成网络的中心设备，却会存在很多缺点。
- 一是效率低下，必须将一个数据包复制n−1份（n的值为HUB端口的数量）。
- 二是数据的传输没有安全性，因为每个数据包都会发送给全部设备。网络中的任何一个设备只需要将网卡调整为混杂模式，就可以轻易实现对整个网络的监听。

## 交换机
因为HUB效率低下，又没有安全保障，所以很快就被另一种设备所替代了。这种新的设备就是交换机，它工作在OSI七层模型物理层之上的数据链路层。

### 物理地址
物理地址（MAC地址）：也叫硬件地址，长度是48比特（6字节），由十六进制的数字组成，分为前24位和后24位。
- 前24位叫作组织唯一标志符（Organizationally Unique Identifier，OUI），是由IEEE的注册管理机构给不同厂家分配的代码，用于区分不同的厂家。
- 后24位是由厂家自己分配的，称为扩展标识符。同一个厂家生产的网卡中MAC地址的后24位是不同的。

### 交换机的工作原理
交换机与集线器同样拥有多个端口，但是不同的地方在于交换机可以读取数据包的内容，并且可以识别数据包中的物理地址部分，交换机的工作原理如下：
1. 学习：交换机中有一张MAC地址表，它里面的每一个表项记录着交换机某个端口所连接设备的硬件地址。这个对应可能是一对多的，表示一个端口连接了多个设备。每当交换机接收到一个数据帧时，首先会查看这个帧里面的源地址，然后在MAC表中查询是否存在对应这个地址的表项，如果存在，就更新这个记录。如果不存在，就将这个源地址与来源端口编号作为一条新记录填写到MAC地址表中。
2. 转发：当交换机收到数据帧之后，还需要查看该数据包中的目的硬件地址，然后在MAC地址表中查找这个目的地址对应的表项，如果找到，就要将数据帧从记录对应的端口发送出去。
3. 更新：这个MAC地址表并非是固定不变的，而是每隔一段时间就会更新。每个记录都有生命周期，时间到了这些记录就会消失。

### 交换机和集线器的区别
交换机和集线器有着本质的区别，集线器是完全不能识别数据包中的地址，因而会将所有的数据包广播出去。但是交换机是能识别数据包中的硬件地址的。简而言之，“集线器广播，交换机转发”。

## 路由器
除了MAC地址之外，数据包中还包含IP地址。当一个数据包到达网关之后，就需要这个IP地址起作用了，数据包从网关到达目标所在子网的过程叫作路由。

数据包在网络中就按照“存储再转发”的方式移动着，网络中的一个又一个中转站就是那些专门用来“存储再转发”数据包的专用计算机。这些设备最初被称作是“接口信息处理器”，这是因为它们最初的目的就是作为通用计算机和网络其余部分进行连接的接口。后来这些专门用来进行通信的计算机被称为路由器，这是因为它们用来将数据包路由到最终目的地。

因特网的核心就是一组协同工作的路由器，它们在同一时间可以将数据包从各个源地址移动到各个目的地址。每一台计算机或者局域网都可以通过连接到路由器而将数据包发送到因特网上的各个目的地。

路由器通过路由协议来执行路由选择和数据包转发功能。路由分为静态路由和动态路由，其相应的路由表称为静态路由表和动态路由表。静态路由表由网络管理员在系统安装时根据网络的配置情况预先设定，网络结构发生变化后由网络管理员手工修改路由表。动态路由随网络运行情况的变化而变化，路由器根据路由协议提供的功能自动计算数据传输的最佳路径，由此得到动态路由表。



